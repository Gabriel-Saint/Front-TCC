<main class="register-container">
  <div class="register-card">

    <section class="illustration-section">
      <!-- A imagem de fundo é controlada pelo CSS -->
    </section>

    <section class="form-section">
      <div class="logo"></div>
      
      <div class="form-header">
        <h1>Cadastro de nova conta</h1>
      </div>

      <form class="register-form" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        
        <div class="form-row">
          <div class="form-group">
            <label for="name">Nome</label>
            <!-- CORREÇÃO: formControlName e id atualizados -->
            <input type="text" id="name" placeholder="Digite seu nome completo" formControlName="name">
            <!-- CORREÇÃO: Usando o getter 'name' -->
            <div *ngIf="name?.invalid && name?.touched" class="error-message">
              <small *ngIf="name?.errors?.['required']">Nome é obrigatório.</small>
            </div>
          </div>
          <div class="form-group">
            <label for="cpf">CPF</label>
            <input type="text" id="cpf" placeholder="Digite seu CPF" formControlName="cpf">
            <div *ngIf="cpf?.invalid && cpf?.touched" class="error-message">
              <small *ngIf="cpf?.errors?.['required']">CPF é obrigatório.</small>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" placeholder="Digite seu email" formControlName="email">
            <div *ngIf="email?.invalid && email?.touched" class="error-message">
               <small *ngIf="email?.errors?.['required']">Email é obrigatório.</small>
               <small *ngIf="email?.errors?.['email']">Email inválido.</small>
            </div>
          </div>
          <div class="form-group">
            <label for="phone">Telefone</label>
            <!-- CORREÇÃO: formControlName e id atualizados -->
            <input type="tel" id="phone" placeholder="Digite seu telefone" formControlName="phone">
             <div *ngIf="phone?.invalid && phone?.touched" class="error-message">
               <small *ngIf="phone?.errors?.['required']">Telefone é obrigatório.</small>
            </div>
          </div>
        </div>
        
        <!-- REMOVIDO: O campo 'funcao' foi removido pois não existe na interface de cadastro -->
        
        <div class="form-group">
          <label for="password">Senha</label>
          <!-- CORREÇÃO: formControlName e id atualizados -->
          <input type="password" id="password" placeholder="Digite a sua senha" formControlName="password">
           <!-- CORREÇÃO: Usando o getter 'password' -->
           <div *ngIf="password?.invalid && password?.touched" class="error-message">
               <small *ngIf="password?.errors?.['required']">Senha é obrigatória.</small>
               <small *ngIf="password?.errors?.['minlength']">A senha precisa de no mínimo 6 caracteres.</small>
            </div>
        </div>

        <div class="form-group">
          <label for="confirmacaoSenha">Confirmação de senha</label>
          <input type="password" id="confirmacaoSenha" placeholder="Confirme a sua senha" formControlName="confirmacaoSenha">
          <div *ngIf="confirmacaoSenha?.invalid && confirmacaoSenha?.touched" class="error-message">
               <small *ngIf="confirmacaoSenha?.errors?.['required']">Confirmação de senha é obrigatória.</small>
          </div>
          <div *ngIf="registerForm.errors?.['passwordMismatch'] && confirmacaoSenha?.touched" class="error-message">
            <small>As senhas não coincidem.</small>
          </div>
        </div>

        <button type="submit" class="btn-register" [disabled]="registerForm.invalid">Criar conta</button>
      </form>
    </section>
  </div>
</main>
